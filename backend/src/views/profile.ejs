<%- include("partials/header") %>

<main class="container-fluid my-5">
  <div class="text-center m-5">
      <img src="data:<%=user.profile_image.mimetype %>;base64,<%= user.profile_image.data %>" class="profile-image">
      <h1 class="mt-3"><%=currentUser.username%></h1>
      <p><span><%= currentUser.followers.length %></span> Followers</p>
     <p><i class="fa fa-map-marker"></i> <%= currentUser.location || "No location"  %></p>
      <p><i class="fa fa-envelope"></i> <%= currentUser.email %></p>
      <button class="btn btn-warning text-light px-3"
          id="editProfileButt">Edit profile</button>
      <a class="btn btn-info" href="/logout">Log out</a>
     
      <div class="modal fade text-left" id="editProfileForm"
          tabindex="-1" role="dialog"
          aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <button type="button" class="close text-right pr-1"
                      data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                  </button>
                  <form action="/profile/<%= user._id %>" method="POST" enctype="multipart/form-data">
                    <div class="modal-body px-3">
                            <div class="form-group">
                                <label for="input-location">Add location</label>
                                <textarea id="input-location"
                                name="user[location]"
                                    class="form-control bg-light"><%= user.location %></textarea>
                            </div>
                            <div class="form-group">
                                <label for="input-email">Add email</label>
                                <input type="email" class="form-control
                                    bg-light" name="user[email]" value="<%= user.email %>" id="input-email">
                            </div>
                            <div class="form-group column p-0 mt-4">
                                <label for="input-file">Profile image</label>
                                <input type="file"
                                    class="form-control-file" 
                                    name="picture"
                                    accept="image/*"
                                    id="input-file">
                            </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-warning
                            text-light">Save</button>
                        <button type="button" class="btn btn-secondary"
                            data-dismiss="modal">Close</button>
                    </div>
                </form>
              </div>
          </div>
      </div>
  </div>
</main>

<%- include("partials/footer") %>